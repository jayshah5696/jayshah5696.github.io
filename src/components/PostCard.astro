---
import FormattedDate from './FormattedDate.astro';
import TagList from './TagList.astro';
import readingTime from 'reading-time';

interface Props {
  title: string;
  date: Date;
  description: string;
  slug: string;
  tags: string[];
  body: string;
  featured?: boolean;
}

const { title, date, description, slug, tags, body, featured = false } = Astro.props;
const stats = readingTime(body);
---

{featured ? (
  <article class="group mb-10">
    <a href={`/posts/${slug}/`} class="block featured-card">
      <div class="flex items-center gap-3 mb-3">
        <FormattedDate date={date} />
        <span class="text-cream-400 dark:text-night-700 text-xs select-none" aria-hidden="true">&bull;</span>
        <span class="font-mono text-xs text-ink-muted dark:text-silk-muted tabular-nums">{stats.text}</span>
      </div>
      <h2 class="font-display text-2xl sm:text-3xl leading-tight text-ink dark:text-silk group-hover:text-terra dark:group-hover:text-terra-light transition-colors duration-200 text-balance">
        {title}
      </h2>
      <p class="mt-3 text-base leading-relaxed text-ink-light dark:text-silk-muted text-pretty">
        {description}
      </p>
    </a>
    {tags.length > 0 && (
      <div class="mt-4">
        <TagList tags={tags} />
      </div>
    )}
    <div class="mt-8 kolam-border">
      <span class="kolam-motif">â—†</span>
    </div>
  </article>
) : (
  <article class="group post-card">
    <a href={`/posts/${slug}/`} class="block">
      <div class="flex items-center gap-3 mb-1.5">
        <FormattedDate date={date} />
        <span class="text-cream-400 dark:text-night-700 text-xs select-none" aria-hidden="true">&bull;</span>
        <span class="font-mono text-xs text-ink-muted dark:text-silk-muted tabular-nums">{stats.text}</span>
      </div>
      <h2 class="font-display text-xl leading-snug text-ink dark:text-silk group-hover:text-terra dark:group-hover:text-terra-light transition-colors duration-200 text-balance">
        {title}
      </h2>
      <p class="mt-1.5 text-sm leading-relaxed text-ink-light dark:text-silk-muted text-pretty line-clamp-2">
        {description}
      </p>
    </a>
    {tags.length > 0 && (
      <div class="mt-2.5">
        <TagList tags={tags} />
      </div>
    )}
  </article>
)}
